<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-08-17">

<title>The Yep Lab: Iron and the Motility of CFT073 – Jin Saeki Ko</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-8fd1faf6fd93e4e6d207ae0f9db51d78.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-C15D2JVJTJ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-C15D2JVJTJ', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="../mobile.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Jin Saeki Ko</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../books.html"> 
<span class="menu-text">Books</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://jinsaekiko.substack.com/" target="_blank"> <i class="bi bi-box-arrow-up-right" role="img">
</i> 
<span class="menu-text">Writings</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#preface" id="toc-preface" class="nav-link active" data-scroll-target="#preface">Preface</a></li>
  <li><a href="#iron-and-motility" id="toc-iron-and-motility" class="nav-link" data-scroll-target="#iron-and-motility">Iron and Motility</a>
  <ul class="collapse">
  <li><a href="#introduction-to-infection-and-motility" id="toc-introduction-to-infection-and-motility" class="nav-link" data-scroll-target="#introduction-to-infection-and-motility">Introduction to Infection and Motility</a></li>
  <li><a href="#purpose-of-project" id="toc-purpose-of-project" class="nav-link" data-scroll-target="#purpose-of-project">Purpose of Project</a></li>
  <li><a href="#why-do-we-study-iron" id="toc-why-do-we-study-iron" class="nav-link" data-scroll-target="#why-do-we-study-iron">Why do we study Iron?</a>
  <ul class="collapse">
  <li><a href="#why-not-explore-other-nutrients" id="toc-why-not-explore-other-nutrients" class="nav-link" data-scroll-target="#why-not-explore-other-nutrients">Why not explore other nutrients?</a></li>
  </ul></li>
  <li><a href="#modes-of-motility-expressed-by-cft073" id="toc-modes-of-motility-expressed-by-cft073" class="nav-link" data-scroll-target="#modes-of-motility-expressed-by-cft073">Modes of Motility Expressed by CFT073</a>
  <ul class="collapse">
  <li><a href="#swimming" id="toc-swimming" class="nav-link" data-scroll-target="#swimming">Swimming</a></li>
  <li><a href="#swarming" id="toc-swarming" class="nav-link" data-scroll-target="#swarming">Swarming</a></li>
  <li><a href="#biofilm-formation" id="toc-biofilm-formation" class="nav-link" data-scroll-target="#biofilm-formation">Biofilm Formation</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Yep Lab: Iron and the Motility of CFT073</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 17, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="preface" class="level1">
<h1>Preface</h1>
<p>After writing a first draft of this page, which came out to a couple thousand words, I decided to break this post up into multiple posts. In this first one, I will explain only one of the several projects I’ve been working on.</p>
</section>
<section id="iron-and-motility" class="level1">
<h1>Iron and Motility</h1>
<section id="introduction-to-infection-and-motility" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-infection-and-motility">Introduction to Infection and Motility</h2>
<p>In order to introduce the purpose of the project, one must first learn the necessary background information. The subject can be introduced by learning about the mechanism of colonization to induce infection.</p>
<p>CFT073 is a strain of <em>Escherichia coli</em> known widely to be the main cause of Urinary Tract Infections (UTIs). Infection is heavily dependent on the bacterial flagella, suggested to contribute to virulence by enabling UPEC to disseminate throughout urinary tract and escape host immune responses <span class="citation" data-cites="laneRoleMotilityColonization2005">(<a href="#ref-laneRoleMotilityColonization2005" role="doc-biblioref">Lane et al. 2005</a>)</span>.</p>
<p>fliC, the cistron that codes for flagellin, is the main component of the bacterial flagella, as lesions in cistron F of region III result in loss of ability to produce flagellin <span class="citation" data-cites="silvermanGeneticAnalysisFlagellar">(<a href="#ref-silvermanGeneticAnalysisFlagellar" role="doc-biblioref">Silverman and Simon n.d.</a>)</span>. Cistron F was later renamed fliC.</p>
<p>So when the deletion of fliC, the gene domain, is made, the absence of flagella is induced, so we expect to see a complete loss in motility, which is what was observed in the fliC deletion mutant <span class="citation" data-cites="laneRoleMotilityColonization2005">(<a href="#ref-laneRoleMotilityColonization2005" role="doc-biblioref">Lane et al. 2005</a>)</span>. The deletion of the gene rendered the mutant completely non-motile, severely compromising virulence.</p>
<p>Naturally, it would follow that studying the inhibition of CFT073 motility could lead to novel ways of treating UTIs.</p>
</section>
<section id="purpose-of-project" class="level2">
<h2 class="anchored" data-anchor-id="purpose-of-project">Purpose of Project</h2>
<p>More than half of women in their lifetime will experience a urinary tract infection (UTI), with most cases caused by uropathogenic <em>E. coli</em> <span class="citation" data-cites="bachellerURINARYTRACTINFECTIONS1997">(<a href="#ref-bachellerURINARYTRACTINFECTIONS1997" role="doc-biblioref">Bacheller and Bernstein 1997</a>)</span>.</p>
<p>Studying motility, a major virulence factor, makes sense when trying the understand mechanisms of infection for CFT073 and other infectious agents of the urinary tract</p>
<p>This is precisely why we turn to the role of iron in motility and its implications on the frequency and severity of infection. But why did we decide to study iron of all nutrients?</p>
</section>
<section id="why-do-we-study-iron" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-study-iron">Why do we study Iron?</h2>
<p>It has been known since the dawn of bacteriology that iron is an essential nutrient facilitating the survival of the <em>E. coli</em> cell.</p>
<p>The importance of iron is understood but the specific reason for its importance reveals itself in the role iron plays as a cofactor. There are specific enzymes within the citric acid cycle that require iron as a cofactor for proper catalysis and therefore, energy production. We expect depletion of iron to negatively impact growth.</p>
<p>We know how iron impacts growth, but we have not yet understood its impacts on motility.</p>
<p>The deletion of the Fur (ferric uptake repressor) expressed an excess of iron intracellularly <span class="citation" data-cites="mchughGlobalIrondependentGene2003">(<a href="#ref-mchughGlobalIrondependentGene2003" role="doc-biblioref">McHugh et al. 2003</a>)</span>. Fur was proven to be a master regulator of iron dependent uptake systems and the synthesis of conjugated proteins with iron as its prosthetic group. Under iron repleted conditions, fur binds to iron, attaching itself to the furbox upstream of iron-related genes, restricting the amount of iron imported into the cell and allowing production of conjugated proteins. Conversely, under iron depleted conditions, fur falls off the furbox, allowing the uptake of iron and decreasing the production of conjugated proteins.</p>
<p>Motility happens to be one of the genes that is affected by the Fur repression. There is evidence that the Fe2+-Fur complex also represses genes (cyoA, flbB, fumC, gpmA, metH, nohB, purR, and sodA) involved in various noniron functions (respiration, <strong>flagella chemotaxis</strong>, the TCA cycle) <span class="citation" data-cites="mchughGlobalIrondependentGene2003">(<a href="#ref-mchughGlobalIrondependentGene2003" role="doc-biblioref">McHugh et al. 2003</a>)</span>.</p>
<section id="why-not-explore-other-nutrients" class="level3">
<h3 class="anchored" data-anchor-id="why-not-explore-other-nutrients">Why not explore other nutrients?</h3>
<p>Iron concentration is, under normal conditions, very restricted in the urinary tract. It is therefore one of the limiting nutrients in the environment of infection.</p>
<p>Iron content of human urine is normally very low (∼0.1 μmol per liter) in the uninfected state. Even in the absence of inﬂammatory stimuli, iron is subject to tight physiologic control <span class="citation" data-cites="robinsonIronHandUropathogenic2018">(<a href="#ref-robinsonIronHandUropathogenic2018" role="doc-biblioref">Robinson, Heffernan, and Henderson 2018</a>)</span>.</p>
<p>The idea behind understanding iron lies in the fact that iron concentration in the urinary tract is already very low. So when thinking of treatment options, a provider should be considering iron availability as a possible factor contributing to virulence.</p>
</section>
</section>
<section id="modes-of-motility-expressed-by-cft073" class="level2">
<h2 class="anchored" data-anchor-id="modes-of-motility-expressed-by-cft073">Modes of Motility Expressed by CFT073</h2>
<p>There are generally three modes of motility, hence avenues for virulence, expressed by CFT073 that we are concerned with: swimming, swarming, and biofilm formation. Inhibition of these virulence factors should decrease the likelihood, and if not, severity of infection.</p>
<section id="swimming" class="level3">
<h3 class="anchored" data-anchor-id="swimming">Swimming</h3>
<p>Independent movement of the cells. The kind of motility we are all familiar with; powered by rotating flagella. This mode of motility is required to swim up the urethra into the bladder, and in severe cases, required to travel up the ureter to the kidneys <span class="citation" data-cites="laneRoleMotilityColonization2005">(<a href="#ref-laneRoleMotilityColonization2005" role="doc-biblioref">Lane et al. 2005</a>)</span>.</p>
</section>
<section id="swarming" class="level3">
<h3 class="anchored" data-anchor-id="swarming">Swarming</h3>
<p>Concerted, multicellular, and energy intense raft-like movement across semi-solid surfaces. Also powered by rotating flagella. Involves quorum sensing. In catheter associated UTIs (CAUTIs), swarming motility is oftentimes employed to travel up the catheter into the bladder, though most studies that looked at this possibility used <em>Proteus mirabilis</em> as the model uropathogen. <span class="citation" data-cites="jonesUltrastructureProteusMirabilis2004">(<a href="#ref-jonesUltrastructureProteusMirabilis2004" role="doc-biblioref">Jones et al. 2004</a>)</span>.</p>
</section>
<section id="biofilm-formation" class="level3">
<h3 class="anchored" data-anchor-id="biofilm-formation">Biofilm Formation</h3>
<p>Matrix of extracellular polymeric substances protecting the pathogen from potentially harmful external conditions, facilitating attachment of the colony. Major causative agent of recurrent infections. Attachment is vital since the human bladder is emptied every couple hours, requiring the pathogen to attach itself to the bladder walls for successful infection <span class="citation" data-cites="yangSubinhibitoryConcentrationsAllicin2016">(<a href="#ref-yangSubinhibitoryConcentrationsAllicin2016" role="doc-biblioref">Yang et al. 2016</a>)</span>.</p>
<p>In addition to modifying the availability of extracellular iron, we are also looking at 2 mutants which have different iron acquisition capabilities. ∆tonB has low intracellular iron since the import of iron is compromised with the deletion of a crucial component of the iron acquisition system. ∆fur has high intracellular iron because the repressor is lacking, hence, allowing for as much iron import via systems like TonB-ExbB-ExbD to occur.</p>



</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-bachellerURINARYTRACTINFECTIONS1997" class="csl-entry" role="listitem">
Bacheller, Catherine D., and Jack M. Bernstein. 1997. <span>“<span>URINARY TRACT INFECTIONS</span>.”</span> <em>Medical Clinics of North America</em> 81 (3): 719–30. <a href="https://doi.org/10.1016/S0025-7125(05)70542-3">https://doi.org/10.1016/S0025-7125(05)70542-3</a>.
</div>
<div id="ref-jonesUltrastructureProteusMirabilis2004" class="csl-entry" role="listitem">
Jones, Brian V., Robert Young, Eshwar Mahenthiralingam, and David J. Stickler. 2004. <span>“Ultrastructure of <span>Proteus</span> Mirabilis <span>Swarmer Cell Rafts</span> and <span>Role</span> of <span>Swarming</span> in <span>Catheter-Associated Urinary Tract Infection</span>.”</span> <em>Infection and Immunity</em> 72 (7): 3941–50. <a href="https://doi.org/10.1128/IAI.72.7.3941-3950.2004">https://doi.org/10.1128/IAI.72.7.3941-3950.2004</a>.
</div>
<div id="ref-laneRoleMotilityColonization2005" class="csl-entry" role="listitem">
Lane, M. Chelsea, Virginia Lockatell, Greta Monterosso, Daniel Lamphier, Julia Weinert, J. Richard Hebel, David E. Johnson, and Harry L. T. Mobley. 2005. <span>“Role of <span>Motility</span> in the <span>Colonization</span> of <span>Uropathogenic Escherichia</span> Coli in the <span>Urinary Tract</span>.”</span> <em>Infection and Immunity</em> 73 (11): 7644–56. <a href="https://doi.org/10.1128/IAI.73.11.7644-7656.2005">https://doi.org/10.1128/IAI.73.11.7644-7656.2005</a>.
</div>
<div id="ref-mchughGlobalIrondependentGene2003" class="csl-entry" role="listitem">
McHugh, Jonathan P., Francisco Rodríguez-Quiñones, Hossein Abdul-Tehrani, Dimitri A. Svistunenko, Robert K. Poole, Chris E. Cooper, and Simon C. Andrews. 2003. <span>“Global <span class="nocase">Iron-dependent Gene Regulation</span> in <span><em>Escherichia</em></span><span> <em>Coli</em></span>.”</span> <em>Journal of Biological Chemistry</em> 278 (32): 29478–86. <a href="https://doi.org/10.1074/jbc.M303381200">https://doi.org/10.1074/jbc.M303381200</a>.
</div>
<div id="ref-robinsonIronHandUropathogenic2018" class="csl-entry" role="listitem">
Robinson, Anne E, James R Heffernan, and Jeffrey P Henderson. 2018. <span>“The Iron Hand of Uropathogenic <span>Escherichia</span> Coli: The Role of Transition Metal Control in Virulence.”</span> <em>Future Microbiology</em> 13 (7): 745–56. <a href="https://doi.org/10.2217/fmb-2017-0295">https://doi.org/10.2217/fmb-2017-0295</a>.
</div>
<div id="ref-silvermanGeneticAnalysisFlagellar" class="csl-entry" role="listitem">
Silverman, and Simon. n.d. <span>“Genetic <span>Analysis</span> of <span>Flagellar Mutants</span> in <span>Escherichia</span> Coli.”</span> https://journals.asm.org/doi/epdf/10.1128/jb.113.1.105-113.1973. Accessed August 2, 2025. <a href="https://doi.org/10.1128/jb.113.1.105-113.1973">https://doi.org/10.1128/jb.113.1.105-113.1973</a>.
</div>
<div id="ref-yangSubinhibitoryConcentrationsAllicin2016" class="csl-entry" role="listitem">
Yang, Xiaolong, Kaihui Sha, Guangya Xu, Hanwen Tian, Xiaoying Wang, Shanze Chen, Yi Wang, Jingyu Li, Junli Chen, and Ning Huang. 2016. <span>“Subinhibitory <span>Concentrations</span> of <span>Allicin Decrease Uropathogenic Escherichia</span> Coli (<span>UPEC</span>) <span>Biofilm Formation</span>, <span>Adhesion Ability</span>, and <span>Swimming Motility</span>.”</span> <em>International Journal of Molecular Sciences</em> 17 (7): 979. <a href="https://doi.org/10.3390/ijms17070979">https://doi.org/10.3390/ijms17070979</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/jinsko\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>